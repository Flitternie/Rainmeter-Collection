# DO NOT EDIT THIS FILE
# Put your preferences in the main Variables.inc file

[Rainmeter]
Update=1000
SkinWidth=250
SkinHeight=50

[Metadata]
Name=NylasMail
Author=Mistic
License=MIT
Information=Display new mail counts with Nylas API
Version=1.0.0

[Variables]
@include=..\Variables.inc

[TextStyle]
FontColor=0,0,0
FontFace=Source Sans Pro
FontSize=12
AntiAlias=1

[TextStyleBold]
FontWeight=700

[mMailCountTick]
Measure=Calc
UpdateDivider=60
OnUpdateAction=[!CommandMeasure mMailCount "Run"]

[mMailCount]
Measure=Plugin
Plugin=RunCommand
Parameter=curl -s "https://#Token2#@api.nylas.com/threads?in=inbox&view=count&unread=true"
OutputType=ANSI
RegExpSubstitute=1
Substitute='"count": ':"","{":"","}":""," ":"","#CRLF#":"","^$":"0"
IfMatch=^0$
IfMatchAction=[!HideMeter MailBadge][!SetOption MailCount Text "No new message"]
IfNotMatchAction=[!ShowMeter MailBadge][!SetOption MailCount Text "%1 new messages"]

[mBlink]
Measure=Calc
Formula=mBlink = 0 ? 255 : (1 - #BadgeBlink2#) * 255

[Background]
Meter=Image
ImageName=#@#Images\background.png
ImageAlpha=150
X=0
Y=0
W=250
H=50

[MailIcon]
Meter=Image
ImageName=#@#Images\icon-#Icon2#.png
X=7
Y=7
W=30
H=30

[MailBadge]
Meter=Roundline
X=0R
Y=3r
Solid=1
LineLength=6
AntiAlias=1
LineColor=#BadgeColor2#,[mBlink]
DynamicVariables=1

[MailText]
Meter=String
Text=#Email2#
MeterStyle=TextStyle
X=45
Y=5
W=200

[MailCount]
Meter=String
MeasureName=mMailCount
Text="No new message"
MeterStyle=TextStyle | TextStyleBold
X=0r
Y=20
W=200
